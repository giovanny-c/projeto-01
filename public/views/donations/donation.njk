{% extends "views/layout.njk" %}


{% block head %}

    <link rel="stylesheet" href="/styles/donations/donation.css">
    <title>Doação nº {{donation.donation_number}} - Castanharo Telemarketing</title>

{% endblock %}

{% block content %}
    <div class="content">

        <div class="page-title">
           
                {{ngo.name}}
        </div>

         <div class="change">
        <a href="/instituicao/{{ngo.id}}/doacao/{{donation.donation_number|float - 1}}"><< doação anterior</a> | <a href="/instituicao/{{ngo.id}}/doacao/{{donation.donation_number|float + 1}}">proxima doação >></a>
        </div>


        <div class="donation-info">
            <p>
                Doação N°: <a>{{donation.donation_number}} </a>
            </p>
            <p>
                Valor: {{formated_value}}
            </p> 
            <p>
                Criado em: {{formated_date}}
            </p>   
                        
            <p>
                Nome: {{donation.donor_name}} 
            </p>
           
            <p>
                Funcionária: {{donation.worker.name}}
            </p>

        {% if donation.is_canceled %}
            <p>
            CANCELADO
            </p> 
        {% endif %}
            
        </div>

       
        <div class="buttons">
            <button class="show"
            onclick="toggleIframe()">
                Ver Recibo
            </button>

            <form name="form-delete" class="form-delete" action="/" method="method?=POST">

                <button class="cancel"  type="submit">
                    Cancelar Doação
                </button>
            </form>

        </div>
        

        <div >
        
            <iframe class="iframe" name="{{file_name}}" src="data:application/pdf;base64,{{file}}" title="{{donation.donation_number}}"></iframe>

        </div>
    </div>

    
    <script>
        const form = document.querySelector(".form-delete")

            form.addEventListener("submit", function(event){

                    const confirmation = confirm("Cancelar a doação?")

                    if(!confirmation){
                            event.preventDefault()
                    }   

            })
    </script>
    {# <a href="/donations/receipt/{{donation.id}}" class="button" target="_blank">Gerar Recibo</a> #}

{% endblock %}  


